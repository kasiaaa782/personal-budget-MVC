{% extends "base.html" %}

{% block title %}Budżet osobisty - Dodawanie wydatku{% endblock %}

{% block navigation %} 

    <nav class="navbar navbar-dark navbar-expand-lg">
        <button class="navbar-toggler mx-auto" type="button" data-toggle="collapse" data-target="#mainmenu" aria-controls="mainmenu" aria-expanded="false" aria-label="Przełącznik nawigacji">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="mainmenu" >
            <ol class="navbar-nav mx-auto">
                <li class="nav-item mx-auto"><a class="nav-link" href="/posts/index">Strona główna</a></li>
                <li class="nav-item mx-auto"><a class="nav-link" href="/posts/income">Dodaj przychód</a></li>
                <li class="nav-item mx-auto"><a class="nav-link active" href="/posts/expense">Dodaj wydatek</a></li>
                <li class="nav-item mx-auto"><a class="nav-link" href="/balance/balance">Przeglądaj bilans</a></li>
                <li class="nav-item mx-auto"><a class="nav-link disabled" href="#">Ustawienia</a></li>
                <li class="nav-item mx-auto"><a class="nav-link" href="/logout">Wyloguj się</a></li>
            </ol>
        </div>
    </nav>

{% endblock %}

{% block head %}
    <script>
        function checkData(){
            //payment
            var payments = [];
            var payment = 0;
            for(i=0; i<3; i++){
                payments[i] = document.getElementById("p"+i);
                if(payments[i].checked == true){
                    payment = payments[i].value;
                 }  
            }
            if(payment == 0){
                document.getElementById("infoPayment").innerHTML = "Wybierz płatność.";
            } else {
                document.getElementById("infoPayment").innerHTML = "";
            }

            //category
            var categories = [];
            var category = 0;
            for(i=0; i<16; i++){
                categories[i] = document.getElementById("c"+i);
                if(categories[i].checked == true){
                    category = categories[i].value;
                }  
            }
            if(category == 0){
                document.getElementById("infoCategory").innerHTML = "Wybierz kategorię.";
            } else {
                document.getElementById("infoCategory").innerHTML = "";
            }
        }
    </script>
{% endblock %}

{% block body %}

    <div id="content_expense">
        <div class="container mt-1 mb-1">
            <div id="title">Dodawanie wydatku</div>
            <hr class="line mt-3 mb-3" style="width: 20em">
            <div class="sentence_expense">
                Uzupełnij poniższe dane dotyczące nowego wydatku
            </div>
            <form method="post" action="/posts/create-expense">
                <div class="row justify-content-center mt-3">
                    <div class="block">
                        <label>Kwota : <input type="number" step="0.01" min="0.01" name="amount"  id="amount" value="{{ expense.amount }}" required></label>
                    </div>
                    <div class="block">
                        <label>Data : <input type="date" name="date" id="date1" value="{{ expense.date }}"></label>
                    </div>
                </div>
                {% if expense.errors is not empty %}
                    <div class='error'>{{ expense.errors[0] }}</div>
                {% endif %}
                <div class="row justify-content-center">
                    <div class="col-sm-12 col-md-3 mb-2">Sposób płatności:</div>
                    <div>
                        <label class="mr-4"><input type="radio" id="p0" name="payment" value="1" class="mr-2"  >Gotówka</label>
                        <label class="mr-4"><input type="radio" id="p1" name="payment" value="2" class="mr-2" >Karta debetowa</label>
                        <label><input type="radio" name="payment" id="p2" value="3" class="mr-2" >Karta kredytowa</label>
                    </div>
                </div>
                <p class="error" id="infoPayment"></p>
                {% if expense.errors is not empty %}
                    <div class='error'>{{ expense.errors[1] }}</div>
                {% endif %}
                <div class="row justify-content-center mt-2">
                    <div class="col-12 mb-2">Kategoria wydatku:</div>
                    <div class="row col-sm-6 col-md-9 col-lg-12 justify-content-center ml-5">
                        <div class="categories">
                            <div><label><input type="radio" id="c0" value="1" name="category" class="mr-2" >Transport</label></div>
                            <div><label><input type="radio" id="c1" value="2" name="category" class="mr-2" >Książki</label></div>
                            <div><label><input type="radio" id="c2" value="3" name="category" class="mr-2" >Jedzenie</label></div>
                            <div><label><input type="radio" id="c3" value="4" name="category" class="mr-2" >Mieszkanie</label></div>
                        </div>
                        <div class="categories">
                            <div><label><input type="radio" id="c4" value="5" name="category" class="mr-2" >Telekomunikacja</label></div>
                            <div><label><input type="radio" id="c5" value="6" name="category" class="mr-2" >Opieka zdrowotna</label></div>
                            <div><label><input type="radio" id="c6" value="7" name="category" class="mr-2" >Ubranie</label></div>
                            <div><label><input type="radio" id="c7" value="8" name="category" class="mr-2" >Higiena</label></div>
                        </div>
                        <div class="categories">
                            <div><label><input type="radio" id="c8" value="9" name="category" class="mr-2" >Dzieci</label></div>
                            <div><label><input type="radio" id="c9" value="10" name="category" class="mr-2" >Rozrywka</label></div>
                            <div><label><input type="radio" id="c10" value="11" name="category" class="mr-2" >Wycieczka</label></div>
                            <div><label><input type="radio" id="c11" value="12" name="category" class="mr-2" >Oszczędności</label></div>
                        </div>
                        <div class="categories">
                            <div><label><input type="radio" id="c12" value="13" name="category" class="mr-2" >Emerytura</label></div>
                            <div><label><input type="radio" id="c13" value="14" name="category" class="mr-2" >Spłata długów</label></div>
                            <div><label><input type="radio" id="c14" value="15" name="category" class="mr-2" >Darowizna</label></div>
                            <div><label><input type="radio" id="c15" value="16" name="category" class="mr-2" >Inne wydatki</label></div>
                        </div>
                    </div>
                </div>
                <p class="error" id="infoCategory"></p>
                {% if expense.errors is not empty %}
                    <div class='error'>{{ expense.errors[2] }}</div>
                {% endif %}
                <div class="row justify-content-center">
                    <textarea name="comment" id="comment" rows="1" cols="55" placeholder="Krótki komentarz (opcjonalnie)" onfocus="this.placeholder=''" onblur="this.placeholder='Krótki komentarz (opcjonalnie)'"></textarea>
                </div>
                <div class="row justify-content-center mt-3">
                    <input onclick="checkData()" id="expense_submit" type="submit" value="Dodaj wydatek" class="mr-5"> 
                    <input id="expense_button" type="reset" value="Anuluj"> 
                </div>	
            </form>
        </div>
    </div>

{% endblock %}
